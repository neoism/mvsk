#!/usr/bin/env ruby
require 'liz'

args = ARGV.reject { |s| s.start_with?('-') }
opts = ARGV - args

if args.length.eql?(1) and opts.empty?
  Liz.run_file(args.first)
elsif args.length.zero?
  Liz.run_prompt
else
  require 'optparse'

  OptionParser.new do |op|
    op.version = Liz::VERSION
    op.banner = <<~USAGE
      #{op.program_name} #{op.version}

      Usage:

        liz <file> [options]

      Options:
    USAGE

    op.on '--tokens', 'print tokens' do
      puts 'tokens'
    end

    op.on '--nodes', 'print nodes' do
      puts 'nodes'
    end

    op.summary_width = 22

    if args.length > 1
      puts op
      exit(64)
    end
  end.parse!
end
